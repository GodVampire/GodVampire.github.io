---
title: Swiftä¸­å…³é”®å­—çš„ä½¿ç”¨
categories
- Swift
tag: [å…³é”®å­—, è¯­æ³•ç³–]
---

â€‹	

##### å‰è¨€

â€‹     Swift å’Œ Object-C ä»ä½¿ç”¨çš„è§’åº¦æ¯”è¾ƒèµ·æ¥ç»å¯¹æ˜¯åçˆ±Swiftçš„ã€‚ä»ä½¿ç”¨è§’åº¦æ¥è¯´ï¼Œè¯­æ³•ç®€ç»ƒï¼Œä»å¼€å§‹æ¥è§¦çš„Swift2.3åˆ°ç°åœ¨çš„Swift 4è§è¯äº†æ˜¯å¦‚ä½•æŠŠå†—ä½™çš„ä»£ç ä¼˜åŒ–çš„ã€‚

ä¸¾ä¸ªæ —å­ğŸŒ°ä»OCçš„`    [[NSUserDefaults standardUserDefaults] synchronize];`åˆ°Swift2.3çš„

`NSUserDefaults.standardUserDefaults().synchronize()` å†åˆ°Swift 4çš„`UserDefaults.standard.synchronize()`è¿™å¥ä»£ç å¯èƒ½æ˜¯æ˜¯ç®€å•çš„å˜æ›´ï¼Œä½†æ˜¯ä¹Ÿç¬¦åˆå˜åŒ–çš„æ€»è¶‹åŠ¿ã€‚emm~ï¼ŒSwift Moduleä¸­å¾ˆå¤šå»æ‰äº†NSå‰ç¼€ï¼Œæ˜¯ä¸å†æ˜¯Sunå’ŒNextåˆ¶å®šäº†å˜›ï¼ŸæˆAppleè‡ªå·±çš„ä¸€å¥—ï¼Œ2333~ ã€‚å»æ‰äº†å¤šä½™çš„è¯­æ³•è§£é‡Šï¼Œæ›´åŠ å‘æŒ¥enumçš„ä¼˜åŠ¿ç­‰ç­‰å§ï¼Œè¿˜æœ‰å®‰å…¨è§’åº¦ï¼Œåè®®çš„å‘æ‰¬å…‰å¤§ï¼Œå‡½æ•°åŒ–ç¼–ç¨‹ï¼Œæ³›å‹ï¼Œè¯­æ³•ç³–ï¼Œå…³é”®å­—ç­‰ç­‰ï¼Œä¼¼ä¹æœ‰ç‚¹è·‘é¢˜äº†...

â€‹     é‚£ä¹ˆå°±å›å½’æ­£é¢˜ï¼Œæ¥çœ‹çœ‹Swiftæœ‰å“ªäº›ä»¤äººçˆ±ä¸é‡Šæ‰‹çš„å…³é”®å­—å’Œè¯­æ³•ç³–å§~ å…ˆæ¨èä¸€ä¸ªè¯­æ³•ç³–[Then](https://github.com/devxoul/Then).å¾ˆæœ‰æ„æ€..

â€‹     æ ¹æ®æ·±å…¥æµ…å‡ºåŸåˆ™ï¼Œå…ˆä»ç®€å•çš„å¸¸è§çš„å¼€å§‹~

â€‹     æ’åä¸åˆ†å…ˆåï¼Œæ ¹æ®ä½¿ç”¨å°è±¡ç¨‹åº¦æ¥è¯´

â€‹     ä½¿ç”¨é¢‘ç‡æ ¹æ®ç›®å‰é¡¹ç›®æ¥è¯´ï¼Œä»ç›®å‰æœ‰500ä¸ªfileçš„å·¥ç¨‹ä¸­æœç´¢~

### å¯é€‰ç±»å‹æ¨¡å—

##### guard

> ä½¿ç”¨é¢‘ç‡

æœç´¢äº†ä¸€ä¸‹`guard` ç»“æœæ˜¯: 437results in 111filesï¼Œå¾ˆå¤šå¯èƒ½æ¥è‡ªç¬¬ä¸‰æ–¹åº“ã€‚ä½†æ˜¯ä¹Ÿå¯è§å…¶ä½¿ç”¨é¢‘ç‡

> å¸¸è§ç”¨æ³•

æ¥ä¸ªç®€å•æ —å­ï¼Œéšä¾¿copyä¸€å¥

```swift
 guard let axis = self.axis else { return }
```

ä»£ç ä½œç”¨åº”è¯¥æ˜¯åˆ¤æ–­å…¨å±€çš„self.axiså˜é‡æ˜¯å¦ä¸ºç©ºï¼Œå¹¶ç”Ÿæˆå±€éƒ¨å˜é‡axisï¼Œä¸ºç©ºåˆ™returnï¼Œä¸æ‰§è¡Œä¸‹é¢çš„è¯­å¥ã€‚

> ä½œç”¨

`guard`ç¿»è¯‘è¿‡æ¥æœ‰å®ˆå«ï¼Œè­¦å«çš„æ„æ€ï¼Œä¹Ÿé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æ¥ä¿å«`guard`ä¸‹é¢çš„ä»£ç å®‰å…¨ï¼Œæ»¡è¶³`guard`çš„æ¡ä»¶å…è®¸é€šè¿‡ï¼Œå¦åˆ™å¿…é¡»`return`ï¼Œåœ¨å¤„ç†Swiftçš„`optional`å¯é€‰æ‹©ç±»å‹æ—¶ï¼Œåº”ç”¨å¹¿æ³›

ç›¸ä¼¼è¯­å¥

##### if let

> ä½¿ç”¨é¢‘ç‡

æœç´¢äº†ä¸€ä¸‹`if let` ç»“æœæ˜¯: 822 results in 126filesï¼Œå¾ˆå¤šæ¥è‡ªmodelï¼Œé€šè¿‡initè§£æçš„modeléœ€è¦æ¥å¤„ç†å¯èƒ½ä¸ºç©ºçš„ç±»å‹ã€‚

> ç¤ºä¾‹ä»£ç 

```
 var baseUrl: String!
if let baseUrl = dictionary["baseUrl"] as? String {
    self.baself = baseUrl
}else{
    self.baself = ""
}
```

 ä»£ç çš„ä½œç”¨æ¥è§£æå­—å…¸çš„æ—¶å€™ï¼Œåˆ¤æ–­å–å€¼ï¼Œè€Œä¸æ˜¯å¼ºåˆ¶è§£åŒ…ï¼Œåˆ†`if else`ï¼Œå¦‚æœå­—å…¸è§£æä¸ä¸ºnilï¼Œåˆ™æ‰§è¡Œä»£ç å—çš„å†…å®¹ï¼Œå¦åˆ™æ‰§è¡Œelse

> ä½œç”¨

å¯¹å¯é€‰å€¼ æ¥æ ¡éªŒï¼Œæ¥è¾¾åˆ°æ•°æ®å®‰å…¨ ï¼Œè·Ÿ`guard`ç›¸ä¼¼ï¼Œä½†æ˜¯`if let`ä¼šç”Ÿæˆä»£ç å—ï¼Œä¸ä¼šå¼ºåˆ¶è¦æ±‚æœ‰è¿”å›å€¼

##### ??

> ä½¿ç”¨é¢‘ç‡

æœç´¢äº†ä¸€ä¸‹`??` ç»“æœæ˜¯: 265 results in 102 filesï¼Œè¿™ä¸ªå› ä¸ºmodelä¸­éƒ½åšäº†`if let `åˆ¤æ–­æ‰€ä»¥å¯¹æ¨¡å‹ä¸­å¼ºåˆ¶è§£åŒ…çš„æ¯”è¾ƒå°‘

> ç¤ºä¾‹ä»£ç 

```
let imageUrl = self.ztImgUrl ?? ""
```

ä»£ç æ˜¯å¼ºåˆ¶è§£åŒ…self.ztImgUrlå¦‚æœå…¶ä¸ºnilï¼Œåˆ™èŒƒå›´""ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œæˆ–è€…è‡ªå®šä¹‰é»˜è®¤å€¼

> ä½œç”¨

å¯¹å¯é€‰å€¼ç®€å•çš„èµ‹äºˆé»˜è®¤å€¼ï¼Œç»§ç»­æ‰§è¡Œï¼Œæ¯”è¾ƒä¾¿æ·å§

##### optional å°ç»“

â€‹     å¯¹å±æ€§çš„åˆå§‹åŒ–å¦‚` var baseUrl: String!`, ` var baseUrl: String?`,` var baseUrl: String = ""`å¤§æ¦‚åˆ†è¿™ä¸‰ç§ï¼Œ`!`ä¿®é¥°çš„å¿…é¡»è¦ç¡®è®¤å€¼ä¸èƒ½ä¸ºnilï¼Œ`?`ä¿®é¥°çš„éœ€è¦è‡ªä½¿ç”¨çš„æ—¶å€™æœ€å¥½é€šè¿‡ä¸Šè¿°ä¸‰ç§æ–¹å¼å»æ ¡éªŒå€¼æ˜¯å¦ä¸ºnilï¼Œè€Œä¸é€šè¿‡`baseUrl!`æ¥å¼ºåˆ¶è§£åŒ…ã€‚ç¬¬ä¸‰ç§ç»™é»˜è®¤å€¼çš„è¯ï¼Œè§è¿‡æœ‰è¿™æ ·å†™çš„ï¼Œä½†æ˜¯ä¼šæŠŠå€¼å­˜åœ¨é™æ€åŒºï¼Œå ä¸€å®šçš„å­—èŠ‚æ•°ï¼Œè™½ç„¶å¾ˆå°‘ï¼Œä½†ä½¿ç”¨èµ·æ¥å¯èƒ½å°‘äº›éº»çƒ¦ã€‚emmï¼Œè¿˜æ˜¯åå¥½ç¬¬äºŒç§å§~ `var baseUrl: String?`è¿™ç§å†™æ³•~

â€‹     emm, OCä¸­çš„åº”è¯¥æ˜¯nullable ä¸ nonnullæ¥å¯¹åº”Swiftçš„å¯é€‰ç±»å‹.

â€‹     é¡ºä¾¿æƒ³èµ·æ¥ä¸ªå¥½ä¹…ä¹‹å‰çš„ä¸€ä¸ªå°äº‹å„¿ï¼ŒæœåŠ¡æ•°æ®é”™æŠŠä¸€ä¸ªIntç±»å‹å€¼ä¼ æˆå­—ç¬¦ä¸²äº†ï¼Œåœ¨ä½¿ç”¨Int()æ—¶å‚»ä¹ä¹çš„å¼ºåˆ¶è§£åŒ…äº†ï¼Œå¯¼è‡´å‡ºé”™äº†ï¼Œæµ‹è¯•è¯´ç”¨è¿™ä¸ªæ•°æ®æ—¶æœ‰é—®é¢˜å°±æ‰”ç»™æˆ‘äº†~ï¼Œè°ƒè¯•ä¹‹åè¯´åå°æ•°æ®æ ¼å¼é”™è¯¯ï¼Œæ”¹æ”¹æœåŠ¡æ•°æ®å°±è¡Œäº†ï¼Œæµ‹è¯•éè¦è¯´æˆ‘è¿™å¼€å‘çš„æœ‰é—®é¢˜ï¼Œæˆ‘è·Ÿå¥¹è§£é‡Šä¸€é€šï¼Œè¯´æˆ‘å…ˆä¸æ”¹ï¼Œè¿™æ ·è¿˜æœ‰ç±»ä¼¼çš„é”™è¯¯çš„æ—¶å€™ä¹Ÿèƒ½å‘ç°ï¼Œä½†æ˜¯åæ¥æ‰æ„è¯†åˆ°ï¼Œæˆ‘ä»¬å®¢æˆ·ç«¯å¼€å‘æ˜¯ ä¿è¯åº”ç”¨ç¨‹åºä¸å‡ºç°é—®é¢˜æ˜¯ä¸ºç¬¬ä¸€è´£ä»»ï¼Œå³ä½¿èƒ½å‘ç°é”™è¯¯æ•°æ®ï¼Œä½†æ˜¯å¯¼è‡´äº†å¼‚å¸¸å´©æºƒï¼Œå½±å“ä½¿ç”¨æ¯”ä¸€ä¸ªé”™è¯¯æ•°æ®å½±å“è·Ÿå¤§äº†ï¼Œç„¶åå°±èµ¶ç´§ç°ä¸æºœç§‹çš„æ”¹è¿‡æ¥äº†ã€‚



### é—­åŒ…

  ä¹‹å‰é—®ä¸€ä¸ªæœ‹å‹å¼€å‘æ—¶å›è°ƒä¼ å€¼ç”¨çš„`block`ï¼Œ`delegate`ï¼Œ`notify`å“ªä¸ªå¤šä¸€ç‚¹ï¼Ÿâ€ä»£ç†å§â€œ ï¼Œâ€é‚£ä¸ä¼šå†™çš„å¾ˆéº»çƒ¦ä¹ˆï¼Ÿâ€œ ï¼Œ â€ä¹Ÿæ²¡éº»çƒ¦å¤šå°‘å§ï¼Œå…³é”®æ˜¯è¯­ä¹‰æ¸…æ™°â€œ ã€‚æˆ‘å†ä¸€æƒ³æˆ‘ä»¬è¿™ä»£ç é‡Œå……æ–¥ç€å„ç§`CallBack`,ç¤ºä¾‹ï¼š

```swift
typealias CallBackS       = (String) -> Void
typealias CallBackSI      = (String,NSInteger) -> Void
typealias CallBackIndex   = (IndexPath) -> Void
typealias CallBackI       = (Int) -> Void
...
```

 æœ‹å‹å›äº†æˆ‘ä¸¤ä¸ªå­— â€å–å–â€œ ~      å¿ƒé‡Œé»˜å¿µä¸€å¥ï¼šMMP

##### autoclosure

```swift
func autoClosureFunction(_ closure: @autoclosure () -> Bool) {
     if closure() {
         print("True")
      }else{
         print("false")
      }
}
autoClosureFunction(1 > 2) //false
```

ç®€å•è¯´ï¼Œ`@autoclosure` åšçš„äº‹æƒ…å°±æ˜¯æŠŠä¸€å¥è¡¨è¾¾å¼è‡ªåŠ¨åœ°**å°è£…**æˆä¸€ä¸ªé—­åŒ… (closure)ã€‚è¿™æ ·æœ‰æ—¶å€™åœ¨è¯­æ³•ä¸Šçœ‹èµ·æ¥å°±ä¼šéå¸¸æ¼‚äº®ã€‚`@autoclosure` å¹¶ä¸æ”¯æŒå¸¦æœ‰è¾“å…¥å‚æ•°çš„å†™æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰å½¢å¦‚ `() -> T` çš„å‚æ•°æ‰èƒ½ä½¿ç”¨è¿™ä¸ªç‰¹æ€§è¿›è¡Œç®€åŒ–ã€‚å¦å¤–å› ä¸ºè°ƒç”¨è€…å¾€å¾€å¾ˆå®¹æ˜“å¿½è§† `@autoclosure` è¿™ä¸ªç‰¹æ€§ï¼Œæ‰€ä»¥åœ¨å†™æ¥å— `@autoclosure` çš„æ–¹æ³•æ—¶è¿˜è¯·ç‰¹åˆ«å°å¿ƒï¼Œå¦‚æœåœ¨å®¹æ˜“äº§ç”Ÿæ­§ä¹‰æˆ–è€…è¯¯è§£ï¼Œæ›´æ¨èä½¿ç”¨`typealias`é… `var callBackS:CallBackIS!`å®šä¹‰ä½¿ç”¨ã€‚

##### @escaping

```swift
    // ç®€å•çš„alter
    func setupAlter(title:String,message:String,sureBlock:@escaping CallBack){
        let alert = UIAlertController.init(title: title, message: message, preferredStyle: UIAlertControllerStyle.alert)
        let action = UIAlertAction.init(title: "ç¡®å®š", style: UIAlertActionStyle.default){ (action) in
           sureBlock()
        }
        alert.addAction(action)
        self.present(alert, animated: true, completion: nil)
    }
```

   å…ˆè§£é‡Šä¸€ä¸‹å®šä¹‰ï¼š@escapingï¼Œé€ƒé€¸é—­åŒ…ï¼Œä¹Ÿå°±æ˜¯å¦‚æœè¿™ä¸ªé—­åŒ…æ˜¯åœ¨å‡½æ•°æ‰§è¡Œå®Œåæ‰è¢«è°ƒç”¨ï¼Œè°ƒç”¨çš„åœ°æ–¹è¶…è¿‡äº†è¿™å‡½æ•°çš„èŒƒå›´ï¼Œå«é€ƒé€¸é—­åŒ…ã€‚åŒç†å¦‚æœè¿™ä¸ªé—­åŒ…æ˜¯åœ¨è¿™ä¸ªå‡½æ•°ç»“æŸå‰å†…è¢«è°ƒç”¨ï¼Œå°±æ˜¯éé€ƒé€¸çš„å³noescapeã€‚

   è¿™ä¸ªçš„è¯ä¸€èˆ¬ä¼šè‡ªåŠ¨æç¤ºï¼Œemmï¼Œä¹Ÿä¸æ€ä¹ˆå¥½è§£é‡Šï¼Œ[è¯¦æƒ…æˆ³è¿™é‡Œ](https://github.com/apple/swift-evolution/blob/master/proposals/0103-make-noescape-default.md).

##### é—­åŒ…å°ç»“

â€‹    ç”¨äº†blockï¼Œå°±éš¾å…ä¼šå‡ºç°å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚å…¶ä¸­Swiftæœ‰ä¸¤ç§weakåŒ–çš„æ–¹å¼`weak`,`unowned`ï¼Œä¸¤ç§çš„åŒºåˆ«å°±ä¸å¤šè§£é‡Šäº†ï¼Œé€šè¿‡[**ios-good-practices**](https://github.com/futurice/ios-good-practices),[**swift-style-guide**](https://github.com/raywenderlich/swift-style-guide)ï¼Œæˆ‘è¿˜æ˜¯æ¨èè¿™ç§å†™æ³•

```
    API.repos(username: self.username) { [weak self] result in
      guard let `self` = self else { return }
      self.tableView.reloadData()
    }
```



### è¾“å…¥æ§åˆ¶

#### _

emm, æ²¡é”™æ˜¯ä¸ªä¸‹åˆ’çº¿ï¼Œè¿˜æ˜¯ä»ä»£ç å¼€å§‹

```swift
 func saveAge(age: Int){}
 func saveName(_ name: String){}
    
 saveAge(age: 10)
 saveName("Vampire")
```

ä½œç”¨ä¹Ÿæ˜¾è€Œæ˜“è§ï¼Œçœç•¥æ–¹æ³•è°ƒç”¨æ—¶çš„å½¢å‚ï¼Œé¿å…é¢å¤–çš„è¯­ä¹‰æè¿°ï¼Œè®©ä¸Šä¸‹æ–‡æ›´æ¸…æ™°ï¼Œå¥½å§ï¼Œæˆ‘ç¼–ä¸ä¸‹å»äº†...

##### é»˜è®¤å€¼

```swift
 func savePersonData(age: Int, name: String = "Vampire"){}
     
 savePersonData(age: 10) // å¯ä»¥è¿™æ ·
 savePersonData(age: 10, name: "Vampire")// ä¹Ÿå¯ä»¥è¿™æ ·
```

Swift è¿™ç‚¹è¿˜æ˜¯è›®åƒpythonçš„ï¼Œå½“æ–¹æ³•éƒ½ç»™ä¸Šé»˜è®¤å€¼çš„æ—¶å€™å¯ä»¥æ§åˆ¶ä¼ å…¥å‚æ•°çš„ä¸ªæ•°ï¼Œä¸ç”¨å†åƒOCé‚£æ ·æ ¹æ®ä¸åŒçš„å‚æ•°ä¸ªæ•°å†™ä¸€å¤§å †åµŒå¥—æ–¹æ³•ï¼Œéš¾çœ‹æ­»äº†ã€‚è¿™ç‚¹ç›®å‰å‘ç°`Alamofire`åšçš„æ¯”è¾ƒå¥½ã€‚

##### inout

```swift
var value = 50
print(value)  // æ­¤æ—¶valueå€¼ä¸º50
func increment(_ value: inout Int, length: Int = 10) {
    value += length
}
increment(&value)// ä¼šå–åœ°å€, å³æ”¹å˜åŸæœ‰çš„å€¼
print(value)  // æ­¤æ—¶valueå€¼ä¸º60ï¼ŒæˆåŠŸæ”¹å˜äº†å‡½æ•°å¤–éƒ¨å˜é‡valueçš„å€¼
// æ‰€ä»¥æ…é‡çš„ è°ƒç”¨ inout ä¿®é¥°çš„å‡½æ•°,å› ä¸ºå¯ä»¥æ”¹å˜ åŸæœ‰çš„å€¼
```

emmï¼ŒSwiftä¸­å°†æ•°ç»„ï¼Œå­—å…¸ç­‰å¾ˆå¤šéƒ½æ”¹æˆäº†å€¼ç±»å‹ï¼Œ`Struct`ç»“æ„ï¼Œä¸å†æ˜¯å€¼å¼•ç”¨ã€‚å°±æ˜¯èµ‹äºˆå¦ä¸€ä¸ªå˜é‡ï¼Œæ”¹å˜å®ƒï¼Œå¹¶ä¸ä¼šå½±å“åŸæ¥çš„å€¼ï¼Œè¿™æ ·åº”è¯¥ä¸ç”¨å¤šè§£é‡Šäº†å§~ ï¼Œè€Œç”¨`inout`ä¿®é¥°çš„è¯ååˆ°æ°æ°ç›¸åï¼Œç”¨æ¥è¯¥å˜åŸæœ‰çš„å€¼ï¼Œæ‰€ä»¥è°ƒç”¨ç”¨`inout`ä¿®é¥°çš„æ–¹æ³•æ—¶ï¼Œæ³¨æ„å…¶å†…éƒ¨å¯èƒ½æŠŠä½ å½“å‰çš„å˜é‡ç»™æ”¹å˜äº†...

##### åè·å–æšä¸¾ç±»å‹

è¿™ä¸ªåå„¿å«çš„ï¼Œå”‰ã€‚çœ‹ç¤ºä¾‹å§

```swift
enum QuestionType{
      case DoHomework(pt:paperTpye)    //åšä½œä¸šè¯¦æƒ…
}
enum paperTpye :String{
    //è¯•å·ç±»å‹ 1 ä¾‹é¢˜ 2 ç»ƒä¹  3 è€ƒè¯• 4 è¯„æµ‹
    case ptDefult = ""
    case ptExample = "1"
    case ptExercise = "2"
    case ptExamination = "3"
    case ptEffect = "4"
}

// è°ƒç”¨ç¡®è®¤ç¯å¢ƒå˜é‡çš„ç±»å‹åªéœ€è¦ï¼Œä¼ å…¥å€¼å°±è¡Œ
QuestionType.DoHomework(pt: paperTpye(rawValue:"2")!)

// æšä¸¾ç±»å‹æ—¶:
case .DoHomework(let pt): //åšä½œä¸šè¯¦æƒ…
```

è¿™ä¸ªåœ¨å¤„ç†æ¨¡å—çš„nå¤šæšä¸¾æƒ…å†µçš„æ—¶å€™ï¼Œå¯ä»¥åªæ ¹æ®æœåŠ¡çš„å€¼æ¥ç¡®è®¤å½“å‰çš„æšä¸¾å€¼ã€‚æå¤§ä¾¿åˆ©äº†ä½¿ç”¨ï¼Œçµæ„Ÿæ¥è‡ª`Alamofire`çš„Errorå¤„ç†ï¼Œåæ¥å‘ç°æ–¯å¦ç¦çš„ç™½èƒ¡å­è®²å¸ˆä¹Ÿè®²äº†(æ‚è„¸ .



emm~ å…ˆåˆ°è¿™é‡Œå§ï¼Œå…¬å¸çš„äº‹å„¿å¯çœŸå¤Ÿå¤´ç–¼çš„ï¼Œä¹Ÿè§è¯†åˆ°äº†æœ‰äº›äººçœŸçš„~



